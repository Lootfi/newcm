{"version":3,"sources":["webpack:///./src/components/PrivateRoute.js","webpack:///./src/client/Home.js","webpack:///./src/pages/app.js"],"names":["PrivateRoute","Component","component","rest","React","useState","undefined","auth","setAuth","useEffect","checkAuth","result","axios","get","headers","Authorization","localStorage","getItem","then","res","catch","err","console","log","navigate","Home","title","App","basepath","path"],"mappings":"mMA6CeA,EAxCM,SAAC,GAAuC,IAA1BC,EAAyB,EAApCC,UAAyBC,EAAW,+BAClCC,IAAMC,cAASC,GAAhCC,EADmD,KAC7CC,EAD6C,KAG1DJ,IAAMK,WAAU,WACdC,MACC,IAEH,IAAIA,EAAS,8BAAG,YACd,IAAIC,QAAeC,IAChBC,IAAI,aAAc,CACjBC,QAAS,CACPC,cAAc,UAAWC,aAAaC,QAAQ,YAGjDC,MAAK,SAACC,GACL,OAAO,KAERC,OAAM,SAACC,GACN,OAAO,KAEXC,QAAQC,IAAI,SAAUZ,GACtBH,EAAQG,MAdG,qDAkBb,OAAYL,MAARC,EACK,uCAEG,GAARA,GAEFiB,mBAAS,KACF,MAGL,kBAAC,SAAD,KACE,kBAACvB,EAAcE,K,wBCtCR,SAASsB,IACtB,OACE,4BACE,kBAAC,IAAD,CAAKC,MAAM,SACX,oCAFF,OAIE,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,qCCISC,UAXH,WACV,OACE,kBAAC,IAAD,KACE,kBAAC,SAAD,CAAQC,SAAS,QACf,kBAAC,EAAD,CAAcC,KAAK,IAAI3B,UAAWuB","file":"component---src-pages-app-js-928a1421f06ad1f6acb2.js","sourcesContent":["import React from 'react';\r\nimport { Router } from '@reach/router';\r\nimport { navigate } from 'gatsby';\r\nimport { AuthContext } from '../../../common/src/contexts/AuthContext';\r\nimport axios from 'common/src/axios';\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const [auth, setAuth] = React.useState(undefined);\r\n\r\n  React.useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  let checkAuth = async () => {\r\n    let result = await axios\r\n      .get('auth/check', {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      })\r\n      .then((res) => {\r\n        return true;\r\n      })\r\n      .catch((err) => {\r\n        return false;\r\n      });\r\n    console.log('RESULT', result);\r\n    setAuth(result);\r\n  };\r\n  // typeof window !== 'undefined' &&\r\n  // (!localStorage.getItem('user') || !localStorage.getItem('token'))\r\n  if (auth == undefined) {\r\n    return <h1>loading</h1>;\r\n  }\r\n  if (auth == false) {\r\n    // make it async\r\n    navigate('/'); //redirect to static page\r\n    return null;\r\n  } else\r\n    return (\r\n      <Router>\r\n        <Component {...rest} />\r\n      </Router>\r\n    );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport SEO from '../components/seo';\r\nexport default function Home() {\r\n  return (\r\n    <h1>\r\n      <SEO title=\"Home\" />\r\n      <h1>Home</h1>\r\n      Home\r\n      <h1>Home</h1>\r\n      <h1>Home</h1>\r\n      <h1>Home</h1>\r\n      <h1>Home</h1>\r\n      <h1>Home</h1>\r\n      <h1>Home</h1>\r\n      <h1>Home</h1>\r\n    </h1>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Router } from '@reach/router';\r\nimport PrivateRoute from '../components/PrivateRoute';\r\n\r\nimport Template from './template-app';\r\nimport Home from '../client/Home';\r\n\r\nconst App = () => {\r\n  return (\r\n    <Template>\r\n      <Router basepath=\"/app\">\r\n        <PrivateRoute path=\"/\" component={Home} />\r\n        {/* <Login path=\"/login\" /> */}\r\n      </Router>\r\n    </Template>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"sourceRoot":""}