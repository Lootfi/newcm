{"version":3,"sources":["webpack:///./src/pages/front/passwordReset.js"],"names":["PasswordReset","React","useState","password","password_confirmation","state","setState","loading","setLoading","errorsRef","useRef","changeValue","e","target","name","value","title","content","textAlign","className","htmlFor","id","type","placeholder","autoComplete","onChange","onClick","preventDefault","current","style","color","innerHTML","axios","post","token","URLSearchParams","window","location","search","get","email","then","res","catch","err","response","data","error","errors","disabled","ref"],"mappings":"4FAAA,8LAae,SAASA,IAAiB,IAAD,EACZC,IAAMC,SAAS,CACvCC,SAAU,GACVC,sBAAuB,KAFlBC,EAD+B,KACxBC,EADwB,OAKRL,IAAMC,UAAS,GAAtCK,EAL+B,KAKtBC,EALsB,KAMhCC,EAAYR,IAAMS,OAAO,IAE/B,SAASC,EAAYC,GAAI,IAAD,EACtBN,EAAS,OAAD,UAAMD,IAAN,MAAcO,EAAEC,OAAOC,MAAOF,EAAEC,OAAOE,MAAvC,KAmCV,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKC,MAAO,oDACZ,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEC,QAAQ,mCACRC,UAAU,WAEZ,yBAAKC,UAAU,kBACb,2BAAOC,QAAQ,YAAf,+BACA,2BACEC,GAAG,WACHC,KAAK,WACLR,KAAK,WACLS,YAAY,uBACZC,aAAa,MACbT,MAAOV,EAAMF,SACbsB,SAAUd,IAEZ,2BAAOS,QAAQ,YAAf,iBACA,2BACEC,GAAG,wBACHC,KAAK,WACLR,KAAK,wBACLS,YAAY,eACZC,aAAa,MACbT,MAAOV,EAAMD,sBACbqB,SAAUd,IAEZ,4BACEe,QA/DZ,SAAwBd,GAItB,GAHAA,EAAEe,iBACFnB,GAAW,GAEPH,EAAMF,WAAaE,EAAMD,sBAK3B,OAJAK,EAAUmB,QAAQC,MAAMC,MAAQ,MAChCrB,EAAUmB,QAAQG,UAChB,gFACFvB,GAAW,GAGXC,EAAUmB,QAAQG,UAAY,GAEhCC,IACGC,KAAK,iBADR,iBAEO5B,EAFP,CAGI6B,MAAO,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,SACvDC,MAAO,IAAIL,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,YAExDE,MAAK,SAACC,GACLN,OAAOC,SAAW,IAClB7B,GAAW,MAEZmC,OAAM,SAACC,GACNnC,EAAUmB,QAAQC,MAAMC,MAAQ,MAChCrB,EAAUmB,QAAQG,UAAYa,EAAIC,SAASC,KAAKC,MAC5CH,EAAIC,SAASC,KAAKE,SACpBvC,EAAUmB,QAAQG,UAAYa,EAAIC,SAASC,KAAKE,OAAO7C,SAAS,IAClEK,GAAW,OAoCLW,UAAU,WACV8B,SAAU1C,GAETA,EAAU,kBAAC,IAAD,MAAa,iBAE1B,uBAAG2C,IAAKzC,OAId,kBAAC,IAAD","file":"component---src-pages-front-password-reset-js-59473672449c5e8e7a67.js","sourcesContent":["import React from 'react';\r\nimport SEO from '../../components/seo';\r\nimport Container from 'common/src/components/UI/Container';\r\nimport Footer from '../../containers/SaasClassic/Footer';\r\n\r\nimport { PasswordResetWrapper } from '../../styles/confidentiality.style';\r\nimport Template from '../template-app';\r\nimport BannerSection from '../../containers/SaasClassic/Banner';\r\nimport FoncSection from '../../containers/SaasClassic/Fonctionnement';\r\nimport Heading from 'common/src/components/Heading';\r\nimport axios from 'common/src/axios';\r\nimport Loader from 'common/src/components/Loader';\r\n\r\nexport default function PasswordReset() {\r\n  const [state, setState] = React.useState({\r\n    password: '',\r\n    password_confirmation: ''\r\n  });\r\n  const [loading, setLoading] = React.useState(false);\r\n  const errorsRef = React.useRef('');\r\n\r\n  function changeValue(e) {\r\n    setState({ ...state, [e.target.name]: e.target.value });\r\n  }\r\n\r\n  function changePassword(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    if (state.password !== state.password_confirmation) {\r\n      errorsRef.current.style.color = 'red';\r\n      errorsRef.current.innerHTML =\r\n        'La confirmation du mot de passe doit correspondre au mot de passe saisi.';\r\n      setLoading(false);\r\n      return;\r\n    } else {\r\n      errorsRef.current.innerHTML = '';\r\n    }\r\n    axios\r\n      .post('password/reset', {\r\n        ...state,\r\n        token: new URLSearchParams(window.location.search).get('token'),\r\n        email: new URLSearchParams(window.location.search).get('email')\r\n      })\r\n      .then((res) => {\r\n        window.location = '/';\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        errorsRef.current.style.color = 'red';\r\n        errorsRef.current.innerHTML = err.response.data.error;\r\n        if (err.response.data.errors)\r\n          errorsRef.current.innerHTML = err.response.data.errors.password[0];\r\n        setLoading(false);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <Template>\r\n      <SEO title={'Réinitialisation de mot de passe - ContactMajor'} />\r\n      <PasswordResetWrapper>\r\n        <Container>\r\n          <Heading\r\n            content=\"Réinitialisation de mot de passe\"\r\n            textAlign=\"center\"\r\n          />\r\n          <div className=\"form-container\">\r\n            <label htmlFor=\"password\">Votre Nouveau Mot de passe:</label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Nouveau Mot de passe\"\r\n              autoComplete=\"off\"\r\n              value={state.password}\r\n              onChange={changeValue}\r\n            />\r\n            <label htmlFor=\"password\">Confirmation:</label>\r\n            <input\r\n              id=\"password_confirmation\"\r\n              type=\"password\"\r\n              name=\"password_confirmation\"\r\n              placeholder=\"Confirmation\"\r\n              autoComplete=\"off\"\r\n              value={state.password_confirmation}\r\n              onChange={changeValue}\r\n            />\r\n            <button\r\n              onClick={changePassword}\r\n              className=\"btn-red3\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? <Loader /> : 'Réinitialiser'}\r\n            </button>\r\n            <p ref={errorsRef}></p>\r\n          </div>\r\n        </Container>\r\n      </PasswordResetWrapper>\r\n      <Footer />\r\n    </Template>\r\n  );\r\n}\r\n"],"sourceRoot":""}